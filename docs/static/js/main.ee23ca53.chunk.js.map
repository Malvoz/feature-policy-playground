{"version":3,"sources":["router.js","elements/Header.jsx","elements/AboutContent.jsx","elements/TestResult.jsx","elements/FeatureDetail.jsx","elements/FeatureSelector.jsx","elements/Footer.jsx","App.js","index.js"],"names":["config","triggerRouteAction","route","routes","find","r","pattern","test","window","location","pathname","params","exec","query","search","replace","split","filter","x","length","map","str","reduce","out","pair","Object","objectSpread","defineProperty","actionResult","action","href","onRoute","setState","newRoutePath","newTitle","mode","methodName","history","undefined","title","prefix","push","suffix","document","join","delim","Link","props","react_default","a","createElement","className","to","onClick","evt","shiftKey","controlKey","metaKey","altKey","preventDefault","pushState","scrollTo","children","addEventListener","Header","router_Link","AboutContent","RESULT_PENDING","RESULT_UNEXPECTED_SUCCESS","RESULT_UNEXPECTED_FAIL","TestResult","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","status","detail","longWait","boundHandleReceiveMessage","handleReceiveMessage","bind","assertThisInitialized","longWaitTimer","removeEventListener","prevProps","_this2","id","clearTimeout","setTimeout","msg","data","type","Number","parseInt","demoID","isWorking","expectToWork","resultDetail","_statusDescriptions","statusDescriptions","classes","classNames","result","alert","alert-info","alert-success","alert-secondary","alert-danger","includes","Boolean","role","Component","generateRandomID","Math","round","random","FeatureDetail","feature","policyAllowed","demoCode","resetAndLoad","isAllowed","name","demoHtml","demoScript","fetch","headers","Accept","demoFetch","ok","json","script","html","linkLabels","policy-spec","policy-mdn","feature-spec","feature-mdn","exampleHeader","concat","browserSupport","assign","edge","safari","disqusConfig","url","identifier","tags","tag","key","description","react_markdown_default","source","main_default","language","checked","onChange","setPolicyAllowed","target","htmlFor","css","src","allow","elements_TestResult","entries","firefox","chrome","_ref","_ref2","slicedToArray","alt","minVersion","links","lnk","rel","note","lib","shortname","React","FeatureSelector","policies","sort","b","p","cl","policy-allowed","featurePolicy","allowsFeature","browser","requires-flag","requiresFlag","l","endsWith","startsWith","Footer","App","activeFeature","setPolicy","triggerForInitialState","newFeature","currentState","_this3","elements_FeatureDetail","f","policy","navigator","serviceWorker","register","ReactDOM","render","src_App_0","getElementById"],"mappings":"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","file":"static/js/main.ee23ca53.chunk.js","sourcesContent":["// @flow\n\nimport React from 'react'\n\ntype LinkProps = {\n  className?: string,\n  to: string,\n  children: any\n}\n\ntype Route = {\n  name: string,\n  pattern: RegExp,\n  action: Function\n}\n\ntype Config = {\n  routes: Array<Route>,\n  onRoute?: Function,\n  triggerForInitialState?: boolean\n}\n\nconst ROUTER_MODE_PUSH = 'push'\nconst ROUTER_MODE_REPLACE = 'replace'\n\nlet config: Config\n\nconst getQueryString = (url): {} => window.location.search\n  .replace(/^\\?/, '')\n  .split('&')\n  .filter(x => x.length)\n  .map(str => str.split('='))\n  .reduce((out, pair) => ({ ...out, [pair[0]]: pair[1] }), {})\n\nconst triggerRouteAction = () => {\n  const route = config.routes.find(r => r.pattern.test(window.location.pathname))\n  if (route) {\n    const matches = route.pattern.exec(window.location.pathname)\n    const params = matches || {}\n    const query = getQueryString()\n    const actionResult = route.action(params, query, window.location.href)\n    if (typeof config.onRoute === 'function') {\n      config.onRoute(actionResult)\n    }\n  }\n}\n\nconst setState = (newRoutePath: string, newTitle?: string, mode: string) => {\n  const methodName = mode === ROUTER_MODE_REPLACE ? 'replaceState' : 'pushState'\n  if (newRoutePath !== window.location.pathname) {\n    window.history[methodName]({}, '', newRoutePath)\n  }\n  if (newTitle !== undefined) {\n    const title = [];\n    if (config.title && config.title.prefix) title.push(config.title.prefix);\n    if (newTitle) title.push(newTitle);\n    if (config.title && config.title.suffix) title.push(config.title.suffix);\n    document.title = title.join(config.title.delim || ' | ');\n  }\n}\n\n// ---------------------------------------------------------------------------\n// External API\n\nexport const configure = (newConfig: Config) => {\n  config = newConfig\n  if (config.triggerForInitialState) {\n    triggerRouteAction()\n  }\n}\n\nexport const replaceState = (newRoutePath: string, newTitle?: string) => setState(newRoutePath, newTitle, ROUTER_MODE_REPLACE)\nexport const pushState = (newRoutePath: string, newTitle?: string) => setState(newRoutePath, newTitle, ROUTER_MODE_PUSH)\n\nexport const Link = (props: LinkProps) => {\n  const clickHandler = (evt) => {\n    if (evt.shiftKey || evt.controlKey || evt.metaKey || evt.altKey) return\n    const route = config.routes.find(r => r.pattern.test(props.to))\n    if (route) {\n      evt.preventDefault()\n      window.history.pushState({}, '', props.to)\n      triggerRouteAction()\n      window.scrollTo(0,0)\n    }\n  }\n  return (\n    <a\n      className={props.className}\n      href={props.to}\n      onClick={clickHandler}\n    >\n      {props.children}\n    </a>\n  )\n}\n\n// ---------------------------------------------------------------------------\n// Bind to external events\n\nwindow.addEventListener('popstate', evt => triggerRouteAction())\n","import React from 'react';\nimport { Link } from '../router';\n\nexport default props => {\n  return (\n    <header>\n      <div className='container'>\n        <h1><Link to='/'>Feature policy playground</Link></h1>\n      </div>\n    </header>\n  );\n}\n","import React  from 'react';\n\nexport default props => {\n  return (\n    <main className='about'>\n      <p>Feature Policy allows you to control which origins can use which features, both in the top-level page and in embedded frames. Essentially, you write a policy, which is an allowed list of origins for each feature. For every feature controlled by Feature Policy, the feature is only enabled in the current document or frame if its origin matches the allowed list of origins.</p>\n      <p>For each policy-controlled feature, the browser maintains a list of origins for which the feature is enabled, known as an allowlist. If you do not specify a policy for a feature, then a default allowlist will be used. The default allowlist is specific to each feature.</p>\n      <p>Click a feature to start exploring.</p>\n    </main>\n  );\n}\n","import React, { Component } from 'react';\nimport classNames from 'classnames';\n\nconst RESULT_PENDING = 'PENDING';\nconst RESULT_OK = 'OK';\nconst RESULT_EXPECTED_FAIL = 'EXPECTED_FAIL';\nconst RESULT_UNEXPECTED_SUCCESS = 'UNEXPECTED_SUCCESS';\nconst RESULT_UNEXPECTED_FAIL = 'UNEXPECTED_FAIL';\nconst LONG_WAIT_TIMEOUT = 2000;\n\nclass TestResult extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      status: RESULT_PENDING,\n      detail: null,\n      longWait: false\n    }\n    this.boundHandleReceiveMessage = this.handleReceiveMessage.bind(this);\n    this.longWaitTimer = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"message\", this.boundHandleReceiveMessage, false);\n\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"message\", this.boundHandleReceiveMessage, false);\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.id !== prevProps.id) {\n      this.setState({ status: RESULT_PENDING, detail: null, longWait: false });  // <-- TODO: maybe setState in a didUpdate hook is bad practice?\n      clearTimeout(this.longWaitTimer);\n      this.longWaitTimer = setTimeout(() => this.setState({ longWait: true }), LONG_WAIT_TIMEOUT);\n    }\n  }\n\n  handleReceiveMessage(msg) {\n    if (msg.data.type !== 'feature-test-result') return;\n\t\tif (Number.parseInt(msg.data.demoID, 10) !== Number.parseInt(this.props.id, 10)) return;\n    if (msg.data.isWorking && this.props.expectToWork) {\n      this.setState({ status: RESULT_OK });\n    } else if (!msg.data.isWorking && !this.props.expectToWork) {\n      this.setState({ status: RESULT_EXPECTED_FAIL });\n    } else if (msg.data.isWorking && !this.props.expectToWork) {\n      this.setState({ status: RESULT_UNEXPECTED_SUCCESS });\n    } else {\n      this.setState({ status: RESULT_UNEXPECTED_FAIL });\n    }\n    this.setState({ detail: msg.data.resultDetail });\n    clearTimeout(this.longWaitTimer);\n  }\n\n  render() {\n    const statusDescriptions = {\n      [RESULT_PENDING]: `Waiting for the demo to report a result...`,\n      [RESULT_OK]: `The feature worked, and it was allowed by the Feature Policy`,\n      [RESULT_EXPECTED_FAIL]: `The feature didn't work, but we didn't expect it to, because it was blocked by the Feature Policy`,\n      [RESULT_UNEXPECTED_SUCCESS]: `The feature worked despite being blocked by a Feature Policy.  Perhaps this policy is not recognised by this browser`,\n      [RESULT_UNEXPECTED_FAIL]: `The feature didn't work, but was allowed by the Feature Policy.  Perhaps the feature is not supported in this browser`\n\t\t};\n\t\tconst classes = classNames({\n\t\t\t'result': true,\n\t\t\t'alert': true,\n\t\t\t'alert-info': this.state.status === RESULT_PENDING,\n\t\t\t'alert-success': this.state.status === RESULT_OK,\n\t\t\t'alert-secondary': this.state.status === RESULT_EXPECTED_FAIL,\n\t\t\t'alert-danger': [RESULT_UNEXPECTED_SUCCESS, RESULT_UNEXPECTED_FAIL].includes(this.state.status)\n\t\t});\n\n    return (\n      <div className={classes}>\n\t\t\t\t{Boolean(this.state.status === RESULT_PENDING) && (\n\t\t\t\t\t<div className=\"spinner-grow\" role=\"status\"><span className=\"sr-only\">Loading...</span></div>\n\t\t\t\t)}\n\t\t\t\t<div className='content'>\n\t\t\t\t\t<p>{statusDescriptions[this.state.status]}\n            {this.state.status === RESULT_PENDING && this.state.longWait && (\n              <span> (you may need to interact with the demo)</span>\n            )}\n          </p>\n\t\t\t\t\t{Boolean(this.state.detail) && (\n\t\t\t\t\t\t<p className='detail'>{this.state.detail}</p>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n      </div>\n    );\n  }\n}\n\nexport default TestResult;\n","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport Highlight from 'react-highlight.js';\nimport { DiscussionEmbed } from 'disqus-react';\n\nimport TestResult from './TestResult';\n\nfunction generateRandomID() {\n  return Math.round(Math.random() * 100000);\n}\n\nclass FeatureDetail extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      feature: null,\n      policyAllowed: true,\n      demoID: null,\n      demoCode: null\n    }\n  }\n\n\tcomponentDidMount() { this.resetAndLoad(); }\n  componentDidUpdate() { this.resetAndLoad(); }\n\n  setPolicyAllowed(isAllowed) {\n    this.setState({\n      policyAllowed: Boolean(isAllowed),\n      demoID: this.state.demoID ? generateRandomID() : null\n    });\n  }\n\n\tasync resetAndLoad() {\n\t\tif (this.props.feature.name !== this.state.feature) {\n\t\t\tthis.setState({ feature: this.props.feature.name, policyAllowed: true, demoID: null, demoHtml: null, demoScript: null });\n\t\t\tconst demoFetch = await fetch('/demos/' + this.props.feature.name + '.json', { headers: { Accept: 'application/json' } });\n\t\t\tif (demoFetch.ok) {\n\t\t\t\tconst demoCode = await demoFetch.json();\n\t\t\t\tif (demoCode.script || demoCode.html) {\n\t\t\t\t\treturn this.setState({\n\t\t\t\t\t\tdemoID: generateRandomID(),\n\t\t\t\t\t\tdemoCode\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n  render() {\n    const feature = this.props.feature;\n    const linkLabels = {\n      \"policy-spec\": \"Specification for \" + feature.name + \" feature policy\",\n      \"policy-mdn\": feature.name + \" feature policy on MDN\",\n      \"feature-spec\": \"Feature specification\",\n      \"feature-mdn\": \"Documentation for the feature on MDN\"\n\t\t};\n    const exampleHeader = `Feature-Policy: ${feature.name} 'none'`;\n\n    // Show default as not supported for browsers where there is no FP\n    const browsers = { firefox: \"Mozilla Firefox\", chrome: \"Google Chrome\", edge: \"Microsoft Edge\", safari: \"Apple Safari\" };\n    const browserSupport = Object.assign({\n      edge: false,\n      safari: false\n    }, feature.browserSupport);\n\n    const disqusConfig = {\n      url: 'https://featurepolicy.info' + window.location.pathname,\n      identifier: this.props.feature.name,\n      title: this.props.feature.name,\n    };\n\n    return (\n      <main className='feature col-12'>\n        <div className='feature-header'>\n\t\t\t\t\t{Boolean(feature.tags) && (\n\t\t\t\t\t\t<div className='tags'>\n\t\t\t\t\t\t\t{feature.tags.map(tag => (<span key={tag} className='badge badge-light'>{tag}</span>))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n          <h2>{feature.name}</h2>\n        </div>\n\n        {Boolean(feature.description) && (\n          <div className='feature-description lead'>\n            <ReactMarkdown source={feature.description} />\n          </div>\n        )}\n\n\t\t\t\t<section className='setup-instructions'>\n        \t<h3>How to apply this policy</h3>\n        \t<p>Send the following HTTP header to control the <code>{feature.name}</code> policy, and disallow it on all origins:</p>\n        \t<Highlight language='http'>{exampleHeader}</Highlight>\n\t\t\t\t</section>\n\n        {Boolean(this.state.demoID) && (\n          <section className='test-case'>\n            <div className='policy-toggle'>\n\t\t\t\t\t\t\t<h3>Affected use case example</h3>\n\t\t\t\t\t\t\t<div className=\"custom-control custom-switch\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tclassName=\"custom-control-input\"\n\t\t\t\t\t\t\t\t\tid=\"policyToggle\"\n\t\t\t\t\t\t\t\t\tchecked={this.state.policyAllowed}\n\t\t\t\t\t\t\t\t\tonChange={evt => this.setPolicyAllowed(evt.target.checked)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<label className=\"custom-control-label\" htmlFor=\"policyToggle\">Allow policy</label>\n\t\t\t\t\t\t\t</div>\n            </div>\n\t\t\t\t\t\t<div className=\"demo-container row px-sm-2 mx-sm-0\">\n\t\t\t\t\t\t\t<div className=\"demo-code-blocks col-lg-6 px-sm-2\">\n                {Boolean(this.state.demoCode.css) && (\n                  <div>\n\t\t\t\t\t\t\t\t    <h4>CSS</h4>\n            \t\t    <Highlight language='css'>{this.state.demoCode.css}</Highlight>\n                  </div>\n                )}\n                {Boolean(this.state.demoCode.html) && (\n                  <div>\n\t\t\t\t\t\t\t\t    <h4>HTML</h4>\n            \t\t    <Highlight language='html'>{this.state.demoCode.html}</Highlight>\n                  </div>\n                )}\n                {Boolean(this.state.demoCode.script) && (\n                  <div>\n\t\t\t\t\t\t\t\t    <h4>JavaScript</h4>\n            \t\t    <Highlight language='javascript'>{this.state.demoCode.script}</Highlight>\n                  </div>\n                )}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='demo-output col-lg-6 px-sm-2'>\n\t\t\t\t\t\t\t\t<h4>Output</h4>\n\t\t\t\t\t\t\t\t<iframe\n\t\t\t\t\t\t\t\t\ttitle='Demo output'\n\t\t\t\t\t\t\t\t\tsrc={'/demos/'+feature.name+'.html?demoID='+this.state.demoID}\n                  allow={feature.name + ' ' + (this.state.policyAllowed ? '*' : \"'none'\")}\n                  key={generateRandomID()}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<TestResult id={this.state.demoID} expectToWork={this.state.policyAllowed} />\n          </section>\n        )}\n\n        <section className='does-it-work'>\n          <h3>Does it work?</h3>\n          <p>Currently Firefox, and Chromium based browsers, such as Google Chrome, Samsung Internet, and Opera, are the only user-agents to support Feature Policy.  The minimum version that correctly recognises the <code>{feature.name}</code> policy is:</p>\n          <div className='row'>\n            {Object.entries(browsers).map(([key, name]) => {\n              const status = ((key in browserSupport) ? (browserSupport[key] ? 'supported' : 'unsupported') : 'unknown');\n              return (\n                <div key={key} className='col-lg-3 col-sm-6'>\n                  <div className={'browser-support card ' + status}>\n                    <img src={'/browser-logos/'+key+'.svg'} className=\"card-img-top\" alt={name}></img>\n                    <div className=\"card-body\">\n                    {(status === 'supported') && (<p className='card-text'><i className=\"fas fa-check-circle\"></i>{browserSupport[key].minVersion}+</p>)}\n                    {(status === 'unsupported') && (<p className='card-text'><i className=\"fas fa-times-circle\"></i>Not supported</p>)}\n                    {(status === 'unknown') && (<p className='card-text'>Unknown</p>)}\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </section>\n\n        {Boolean(feature.links) && (\n          <section className='links'>\n            <h3>See also</h3>\n            <ul>\n              {feature.links.map(lnk => (\n                <li key={lnk.href}>\n                  <a href={lnk.href} className={lnk.rel}>{linkLabels[lnk.rel]}{lnk.note && \" (\"+lnk.note+\")\"}</a>\n                </li>\n              ))}\n            </ul>\n          </section>\n        )}\n\n        <section className='discuss'>\n          <h3>Discussion</h3>\n          <DiscussionEmbed shortname='featurepolicy' config={disqusConfig} />\n        </section>\n\n      </main>\n    );\n  }\n}\n\nexport default FeatureDetail;\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { Link } from '../router';\n\nexport default props => {\n  const policies = props.policies;\n\n  return (\n    <div className='row'><div className='col-12'>\n      <table className='features-list'>\n        <thead>\n          <tr><th>Policy</th><th>Support</th><th>Docs</th></tr>\n        </thead>\n        <tbody>\n          {policies.sort((a,b) => (a.name < b.name) ? -1 : 1).map(p => {\n            const cl = classNames({\n              \"policy-allowed\": window.featurePolicy && window.featurePolicy.allowsFeature(p.name),\n            });\n            return (\n              <tr key={p.name}>\n                <td><Link to={'/policies/'+p.name} className={cl}>{p.name}</Link></td>\n                <td>\n                  {p.browserSupport && Object.entries(p.browserSupport).map(([browser, data]) => {\n                    const classes = classNames({\n                      \"browser\": true,\n                      \"requires-flag\": data.requiresFlag\n                    });\n                    if (!data.minVersion) return false;\n                    return (\n                      <div key={browser} className={classes}>\n                        <img src={'/browser-logos/'+browser+'.svg'} className={classes} alt={browser} />\n                        {data.minVersion}\n                        {data.requiresFlag && (<i className=\"fas fa-flag\"></i>)}\n                      </div>\n                    );\n                  })}\n                </td>\n                <td className='links'>\n                  {p.links && p.links.filter(l => l.rel.endsWith('-mdn')).map(l => (\n                    <a key={l.href} href={l.href}>{l.note || (l.rel.startsWith('feature-') ? \"Feature\" : \"Policy\")}</a>\n                  ))}\n                </td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div></div>\n  );\n}\n","import React from 'react';\n\nexport default props => {\n  return (\n    <footer className='text-muted'>\n      <div className='container'>\n        <ul className='footer-links'>\n          <li><a href='https://github.com/triblondon/feature-policy-playground'>GitHub repo</a></li>\n          <li><a href='https://twitter.com/triblondon'>Follow me on twitter</a></li>\n        </ul>\n        <p>Created by <a href='https://trib.tv/'>Andrew Betts</a>.  MIT Licence, unless otherwise indicated.</p>\n      </div>\n    </footer>\n  );\n}\n","import React, { Component } from 'react';\nimport './App.css';\n\nimport * as router from './router'\n\nimport Header from './elements/Header';\nimport AboutContent from './elements/AboutContent';\nimport FeatureDetail from './elements/FeatureDetail';\nimport FeatureSelector from './elements/FeatureSelector';\nimport Footer from './elements/Footer';\n\nimport policies from './_build/policies.json';\n\nclass App extends Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      activeFeature: null\n    }\n  }\n\n  componentDidMount() {\n    router.configure({\n      routes: [\n        { name: 'empty', pattern: /^\\/$/, action: () => this.setPolicy(null) },\n        { name: 'policy', pattern: /^\\/policies\\/([^/]+)\\/?$/, action: params => this.setPolicy(params[1]) }\n      ],\n      title: { suffix: 'Feature policy', delim: ' - ' },\n      triggerForInitialState: true\n    })\n  }\n\n  setPolicy(newFeature) {\n    this.setState(currentState => {\n      if (currentState.activeFeature !== newFeature) {\n        return {activeFeature: newFeature};\n      }\n    })\n    router.pushState(newFeature ? '/policies/' + newFeature : '/', newFeature);\n  }\n\n  render() {\n    return (\n      <div>\n        <Header />\n        <div className='container'>\n          {Boolean(this.state.activeFeature) ? (\n            <div className='row'>\n              <FeatureDetail feature={policies.find(f => f.name === this.state.activeFeature)} />\n            </div>\n          ) : (\n            <div>\n              <AboutContent />\n              <FeatureSelector\n                policies={policies}\n                activeFeature={this.state.activeFeature}\n                onChange={newFeature => this.setPolicy(newFeature)}\n              />\n              <p>Browser support data courtesy of MDN's <a href='https://github.com/mdn/browser-compat-data'>public browser-compat-data</a> project.</p>\n            </div>\n          )}\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nwindow.featurePolicy = document.featurePolicy || document.policy;\n\nif ('serviceWorker' in navigator) {\n  navigator.serviceWorker.register('/sw.js');\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}